{"remainingRequest":"D:\\idea_project\\XiaoMiShoppingSystem\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\idea_project\\XiaoMiShoppingSystem\\admin\\src\\views\\Home.vue?vue&type=style&index=0&id=fae5bece&lang=scss&scoped=true&","dependencies":[{"path":"D:\\idea_project\\XiaoMiShoppingSystem\\admin\\src\\views\\Home.vue","mtime":1638687595991},{"path":"D:\\idea_project\\XiaoMiShoppingSystem\\admin\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\idea_project\\XiaoMiShoppingSystem\\admin\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\idea_project\\XiaoMiShoppingSystem\\admin\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\idea_project\\XiaoMiShoppingSystem\\admin\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\idea_project\\XiaoMiShoppingSystem\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\idea_project\\XiaoMiShoppingSystem\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpAaW1wb3J0ICJ+QC9hc3NldHMvc2Nzcy9ob21lIjsK"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsXA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <el-row class=\"home\" :getter=\"20\">\r\n        <el-col :span=\"8\" style=\"margin-top: 20px\">\r\n            <el-card shadow=\"hover\">\r\n                <div class=\"user\">\r\n                    <img :src=\"user.headPic\" />\r\n                    <div class=\"userinfo\">\r\n                        <p class=\"name\" v-text=\"user.username\"></p>\r\n                        <p class=\"access\"  v-if=\"user.roleId === 'SwjNNKK7'\">管理员</p>\r\n                        <p class=\"access\"  v-else-if=\"user.roleId === 'IvADLevN'\">普通用户</p>\r\n                    </div>\r\n                </div>\r\n                <div class=\"login-info\">\r\n                    <p>手机号码：<span v-text=\"user.phone\"></span></p>\r\n                    <p>今日日期：<span v-text=\"todayDate\"></span></p>\r\n                </div>\r\n            </el-card>\r\n            <el-card style=\"margin-top: 20px; height: 520px\" >\r\n                <div style=\"text-align:center;color: #909399\">在线用户列表</div>\r\n                <el-table :data=\"tableData\" height=\"460\">\r\n                    <el-table-column\r\n                            show-overflow-tooltip\r\n                            v-for=\"(val, key) in tableLabel\"\r\n                            :key=\"key\"\r\n                            :prop=\"key\"\r\n                            :label=\"val\">\r\n                    </el-table-column>\r\n                </el-table>\r\n            </el-card>\r\n        </el-col>\r\n        <el-col :span=\"16\" style=\"margin-top: 20px\">\r\n            <div class=\"num\">\r\n                <el-card\r\n                        shadow=\"hover\"\r\n                        v-for=\"item in countData\"\r\n                        :key=\"item.name\"\r\n                        :body-style=\"{ display: 'flex', padding: 0 }\">\r\n                    <i\r\n                            class=\"icon\"\r\n                            :class=\"`el-icon-${item.icon}`\"\r\n                            :style=\"{ background: item.color }\">\r\n                    </i>\r\n                    <div class=\"detail\">\r\n                        <p class=\"num\"><span v-text=\"item.value\"></span></p>\r\n                        <p class=\"txt\"><span v-text=\"item.name\"></span></p>\r\n                    </div>\r\n                </el-card>\r\n            </div>\r\n\r\n\r\n            <el-card shadow=\"hover\" style=\"height: 280px\">\r\n                <echart :chartData=\"echartData.order\" isChart=\"line\" style=\"height: 280px;width:750px;\"></echart>\r\n            </el-card>\r\n\r\n            <div class=\"graph\">\r\n                <el-card shadow=\"hover\" style=\"height: 260px\">\r\n                    <echart :chartData=\"echartData.stock\" isChart=\"bar\" style=\"height: 240px;\"></echart>\r\n                </el-card>\r\n\r\n                <el-card shadow=\"hover\" style=\"height: 260px\">\r\n                    <echart :chartData=\"echartData.category\" style=\"height: 240px\" isChart=\"pie\"></echart>\r\n                </el-card>\r\n            </div>\r\n        </el-col>\r\n    </el-row>\r\n</template>\r\n\r\n<script>\r\n    import Echart from \"@/components/ECharts.vue\";\r\n    export default {\r\n        components: {\r\n            Echart\r\n        },\r\n        data() {\r\n            return {\r\n                user: {},\r\n                tableData: [],\r\n                todayDate: \"\",\r\n                tableLabel: {\r\n                    id: \"编号\",\r\n                    username: \"昵称\"\r\n                },\r\n                countData: [\r\n                    {\r\n                        name: \"用户总数\",\r\n                        value: 1234,\r\n                        icon: \"user\",\r\n                        color: \"#2ec7c9\",\r\n                    },\r\n                    {\r\n                        name: \"商品总数\",\r\n                        value: 210,\r\n                        icon: \"goods\",\r\n                        color: \"#ffb980\",\r\n                    },\r\n                    {\r\n                        name: \"订单总数\",\r\n                        value: 1234,\r\n                        icon: \"money\",\r\n                        color: \"#5ab1ef\",\r\n                    },\r\n                    {\r\n                        name: \"今日成交额\",\r\n                        value: 1234,\r\n                        icon: \"coin\",\r\n                        color: \"#2ec7c9\",\r\n                    },\r\n                    {\r\n                        name: \"本周成交额\",\r\n                        value: 210,\r\n                        icon: \"coin\",\r\n                        color: \"#ffb980\",\r\n                    },\r\n                    {\r\n                        name: \"本月成交额\",\r\n                        value: 1234,\r\n                        icon: \"coin\",\r\n                        color: \"#5ab1ef\",\r\n                    },\r\n                ],\r\n                echartData: {\r\n                    order: {\r\n                        xData: [],\r\n                        series: []\r\n                    },\r\n                    stock: {\r\n                        xData: [],\r\n                        series: []\r\n                    },\r\n                    category: {\r\n                        series: []\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        created(){\r\n            let _this = this;\r\n            let token = Tool.getLoginAdmin();\r\n            _this.user.token = token;\r\n            if (Tool.isEmpty(token)) {\r\n                _this.$router.push(\"/login\");\r\n            }else{\r\n                //用token去查询用户数据是否仍存在\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/user/check_login\", {token:token}).then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        _this.user = resp.data;\r\n                        _this.user.headPic = process.env.VUE_APP_SERVER + \"/photo/view?filename=\" + _this.user.headPic;\r\n                    }else{\r\n                        _this.$router.push(\"/login\");\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        mounted() {\r\n            let _this = this;\r\n            _this.getUserTotal();\r\n            _this.getProductTotal();\r\n            _this.getOrderTotal();\r\n            _this.getTodayPrice();\r\n            _this.getWeekPrice();\r\n            _this.getMonthPrice();\r\n            _this.getOnlineUser();\r\n            _this.echartData.order.xData = [_this.getDate(5), _this.getDate(4), _this.getDate(3), _this.getDate(2), _this.getDate(1)]\r\n            _this.getOrderCountByDateAndState();\r\n            _this.getProductListByStock();\r\n            _this.getCategoryListByPrice();\r\n            _this.todayDate = _this.getDate(1);\r\n        },\r\n        methods: {\r\n            getCategoryListByPrice(){\r\n                let _this = this;\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/category/total-price\").then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        let result = resp.data;\r\n                        let data = [];\r\n                        for(let i=0; i<result.length; i++){\r\n                            data.push({value: result[i].totalPrice, name: result[i].name});\r\n                        }\r\n\r\n                        _this.echartData.category.series = [\r\n                            {\r\n                                type: 'pie',\r\n                                data: data\r\n                            }\r\n                        ]\r\n                    }\r\n                });\r\n            },\r\n            getProductListByStock(){\r\n                let _this = this;\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/product/stock\").then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        let result = resp.data;\r\n                        let xData = [];\r\n                        let data = [];\r\n                        for(let i=0; i<result.length; i++){\r\n                            xData.push(result[i].id);\r\n                            data.push(result[i].stock);\r\n                        }\r\n                        _this.echartData.stock.xData = xData;\r\n                        _this.echartData.stock.series = [\r\n                            {\r\n                                type: 'bar',\r\n                                data: data\r\n                            }];\r\n                    }\r\n                });\r\n            },\r\n            getOrderCountByDateAndState(){\r\n                let _this = this;\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/order/count-state-date\").then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        let result = resp.data;\r\n                        _this.echartData.order.series = [\r\n                            {\r\n                                name: '已完成',\r\n                                data: [result[8], result[6], result[4], result[2], result[0]],\r\n                                type: 'line',\r\n                                smooth: true\r\n                            },\r\n                            {\r\n                                name: '未完成',\r\n                                data: [result[9], result[7], result[5], result[3], result[1]],\r\n                                type: 'line',\r\n                                smooth: true\r\n                            }\r\n                        ]\r\n                    }\r\n                });\r\n            },\r\n            getDate(i) {\r\n                let date;\r\n                switch (i) {\r\n                    case 1:\r\n                        // 当前日期\r\n                        date = new Date();\r\n                        break;\r\n                    case 2:\r\n                        // 昨天日期\r\n                        date = new Date(new Date() - 60000*60*24);\r\n                        break;\r\n                    case 3:\r\n                        // 前天日期\r\n                        date = new Date(new Date() - 60000*60*24*2);\r\n                        break;\r\n                    case 4:\r\n                        // 大前天日期\r\n                        date = new Date(new Date() - 60000*60*24*3);\r\n                        break;\r\n                    case 5:\r\n                        // 大大前天日期\r\n                        date = new Date(new Date() - 60000*60*24*4);\r\n                        break;\r\n                }\r\n                let year = date.getFullYear();\r\n                let month = date.getMonth() + 1;\r\n                let strDate = date.getDate();\r\n                if (month >= 1 && month <= 9) {\r\n                    month = \"0\" + month;\r\n                }\r\n                if (strDate >= 0 && strDate <= 9) {\r\n                    strDate = \"0\" + strDate;\r\n                }\r\n                let currentDate = year + \"年\" + month + \"月\" + strDate + \"日\";\r\n                return currentDate;\r\n            },\r\n            getOnlineUser(){\r\n                let _this = this;\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/user/online\").then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        _this.tableData = resp.data;\r\n                    }\r\n                });\r\n            },\r\n            getUserTotal(){\r\n                let _this = this;\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/user/total\").then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        let total = resp.data;\r\n                        for(let i=0; i<_this.countData.length; i++){\r\n                            if(_this.countData[i].name === '用户总数'){\r\n                                _this.countData[i].value = total + '个';\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            getProductTotal(){\r\n                let _this = this;\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/product/total\").then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        let total = resp.data;\r\n                        for(let i=0; i<_this.countData.length; i++){\r\n                            if(_this.countData[i].name === '商品总数'){\r\n                                _this.countData[i].value = total + '个';\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            getOrderTotal(){\r\n                let _this = this;\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/order/total\").then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        let total = resp.data;\r\n                        for(let i=0; i<_this.countData.length; i++){\r\n                            if(_this.countData[i].name === '订单总数'){\r\n                                _this.countData[i].value = total + '个';\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            getTodayPrice(){\r\n                let _this = this;\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/order/today-price\").then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        let price = resp.data;\r\n                        for(let i=0; i<_this.countData.length; i++){\r\n                            if(_this.countData[i].name === '今日成交额'){\r\n                                _this.countData[i].value = '￥'+ price;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            getWeekPrice(){\r\n                let _this = this;\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/order/week-price\").then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        let price = resp.data;\r\n                        for(let i=0; i<_this.countData.length; i++){\r\n                            if(_this.countData[i].name === '本周成交额'){\r\n                                _this.countData[i].value = '￥'+ price;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            getMonthPrice(){\r\n                let _this = this;\r\n                _this.$ajax.post(process.env.VUE_APP_SERVER + \"/admin/order/month-price\").then((response)=>{\r\n                    let resp = response.data;\r\n                    if(resp.code === 0){\r\n                        let price = resp.data;\r\n                        for(let i=0; i<_this.countData.length; i++){\r\n                            if(_this.countData[i].name === '本月成交额'){\r\n                                _this.countData[i].value = '￥'+ price;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        filters:{\r\n            filterPhoto(img){\r\n                return process.env.VUE_APP_SERVER + \"/photo/view?filename=\" + img;\r\n            }\r\n        }\r\n\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n    @import \"~@/assets/scss/home\";\r\n</style>"]}]}